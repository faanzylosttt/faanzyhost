<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8"/>
<title>Faanzy AI</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
:root{
  --bg:#050507;
  --bg-chat:#111117;
  --accent:#7e57ff;
  --accent-glow:#a993ff;
  --text:#f5f5fa;
  --text-sub:#a0a3bd;
}
*{box-sizing:border-box}
body{margin:0;font-family:'Inter',system-ui,sans-serif;background:radial-gradient(ellipse at bottom,#150e2e 0%,var(--bg) 60%);color:var(--text);display:flex;flex-direction:column;height:100vh}
header{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border-bottom:1px solid #25252f}
/* logo orb */
.logo{width:42px;height:42px;position:relative}
.logo svg{width:100%;height:100%;animation:spin 6s linear infinite}
.logo::after{
  content:"";position:absolute;inset:-4px;border-radius:50%;
  background:conic-gradient(from 0deg,var(--accent),var(--accent-glow),var(--accent));
  filter:blur(8px);opacity:.6;animation:spin 6s linear infinite reverse;z-index:-1;
}
@keyframes spin{to{transform:rotate(360deg)}}
header h1{margin:0;font-size:1.3rem;font-weight:700;letter-spacing:.5px}

#chat{flex:1;padding:1rem;overflow-y:auto;display:flex;flex-direction:column;gap:1rem}
.msg{
  max-width:70%;padding:.75rem 1rem;border-radius:1.25rem;line-height:1.5;
  word-break:break-word;transform-origin:bottom;
  animation:slideUp .25s ease forwards;
}
@keyframes slideUp{
  from{transform:translateY(20px) scale(.9);opacity:0}
  to{transform:translateY(0) scale(1);opacity:1}
}
.user{align-self:flex-end;background:linear-gradient(135deg,var(--accent),var(--accent-glow));color:#fff}
.bot{align-self:flex-start;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08)}

footer{display:flex;gap:.5rem;padding:.75rem 1rem;border-top:1px solid #25252f}
input{flex:1;padding:.75rem 1rem;border:none;border-radius:2rem;background:#1c1c24;color:var(--text);outline:none}
button{width:44px;height:44px;border:none;border-radius:50%;background:var(--accent);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s,box-shadow .2s}
button:hover{transform:scale(1.08);box-shadow:0 0 12px var(--accent-glow)}
button svg{width:20px;height:20px;fill:#fff}

/* loader neon */
.loader{display:none;align-self:flex-start;margin-left:.5rem}
.loader span{display:inline-block;width:8px;height:8px;border-radius:50%;background:var(--accent);margin-right:4px;animation:neon 1.2s infinite}
.loader span:nth-child(2){animation-delay:.2s}
.loader span:nth-child(3){animation-delay:.4s}
@keyframes neon{0%,80%,100%{opacity:.3;transform:scale(.8)}40%{opacity:1;transform:scale(1.2)}}
</style>
</head>
<body>

<header>
  <div class="logo">
    <svg viewBox="0 0 48 48">
      <circle cx="24" cy="24" r="20" fill="none" stroke="var(--accent)" stroke-width="2"/>
      <circle cx="24" cy="24" r="14" fill="none" stroke="var(--accent-glow)" stroke-width="1"/>
      <circle cx="24" cy="24" r="8" fill="var(--accent)"/>
    </svg>
  </div>
  <h1>Faanzy AI</h1>
</header>

<main id="chat"></main>

<footer>
  <input id="input" placeholder="Tulis pesan..." autocomplete="off"/>
  <button id="send">
    <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
  </button>
</footer>

<script>
const GEMINI_KEY = "AIzaSyCNAl4MVnrAHm-ziL2oupRMcm3dwnxar2Q";
const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_KEY}`;

const chat = document.getElementById("chat");
const input = document.getElementById("input");
const sendBtn = document.getElementById("send");

const loader = document.createElement("div");
loader.className = "loader";
loader.innerHTML = "<span></span><span></span><span></span>";

function addMsg(text,sender){
  const div=document.createElement("div");
  div.className=`msg ${sender}`;
  div.textContent=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

async function sendMessage(){
  const text=input.value.trim();
  if(!text)return;
  addMsg(text,"user");
  input.value="";
  chat.appendChild(loader);
  loader.style.display="block";
  chat.scrollTop=chat.scrollHeight;

  try{
    const res=await fetch(API_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({contents:[{parts:[{text}]}]})
    });
    const data=await res.json();
    const reply=data?.candidates?.[0]?.content?.parts?.[0]?.text||"Maaf, Faanzy tidak mengerti.";
    loader.remove();
    addMsg(reply,"bot");
  }catch(e){
    loader.remove();
    addMsg("Terjadi gangguan. Silakan coba lagi.","bot");
  }
}
sendBtn.addEventListener("click",sendMessage);
input.addEventListener("keydown",e=>e.key==="Enter"&&sendMessage());
</script>
</body>
</html>
